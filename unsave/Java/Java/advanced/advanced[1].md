# 进阶[1]

<a id="0">`目录`</a>

- $\textcolor{#e18a3b}{【一】}$**[异常处理](#1)**
- $\textcolor{#e18a3b}{【二】}$**[文件IO](#2)**

## 一、异常处理

<a id="1"><!--目录--></a>

- $\textcolor{#2a6e3f}{【1】}$ [异常概念](#1.1)
- $\textcolor{#2a6e3f}{【2】}$ [异常处理](#1.2)
- $\textcolor{#2a6e3f}{【3】}$ [自定义异常](#1.3)
- $\textcolor{#2a6e3f}{【4】}$ [try-with-resource](#1.4)

### 1、异常概念<a id="1.1">💚</a>

```
“二哥，今天就要学习异常了吗？”三妹问。

“是的。只有正确地处理好异常，才能保证程序的可靠性，所以异常的学习还是很有必要的。”我说。

“那到底什么是异常呢？”三妹问。

“异常是指中断程序正常执行的一个不确定的事件。当异常发生时，程序的正常执行流程就会被打断。一般情况下，程序都会有很多条语句，如果没有异常处理机制，前面的语句一旦出现了异常，后面的语句就没办法继续执行了。”

“有了异常处理机制后，程序在发生异常的时候就不会中断，我们可以对异常进行捕获，然后改变程序执行的流程。”

“除此之外，异常处理机制可以保证我们向用户提供友好的提示信息，而不是程序原生的异常信息——用户根本理解不了。”

“不过，站在开发者的角度，我们更希望看到原生的异常信息，因为这有助于我们更快地找到 bug 的根源，反而被过度包装的异常信息会干扰我们的视线。”

“Java 语言在一开始就提供了相对完善的异常处理机制，这种机制大大降低了编写可靠程序的门槛，这也是 Java 之所以能够流行的原因之一。”
```

#### 1.1、异常分为两种

1. 一种是**==编译时异常==**，意思就是编译都没有通过俗称为**错误（error）** ----**Java虚拟机无法解决的严重问题**，一般不会特别去编写代码解决这类问题。

   `例如`：

   - StackOverflowError（栈溢出）
   - OOM（内存溢出）

2. 一种是**==运行时异常==**，就是常见的**异常（Exception）**----其它因编程错误或偶然的外在因素导致的一般性问题，可以使用针对性的代码（异常处理机制）进行处理。

   `例如`：

   - 空指针访问
   - 试图读取不存在的文件
   - 网络连接中断
   - 数组角标越界

#### 1.2、Error和Exception的区别:

​    Error和Exception都有一个共同的根类是**Throwable类**。

​    Error是系统中的错误，程序员是不能改变的和处理的，一般是指与虚拟机相关的问题，如系统崩溃，虚拟机错误，内存空间不足，方法调用栈溢等。对于这类错误的导致的应用程序中断，仅靠程序本身无法恢复和和预防，遇到这样的错误，建议让程序终止。因此我们编写程序时不需要关心这类错误。

​    Exception，也就是我们经常见到的一些异常情况，表示程序可以处理的异常，可以捕获且可能恢复。遇到这类异常，应该尽可能处理异常，使程序恢复运行，而不应该随意终止异常。

![](https://pic.imgdb.cn/item/63ce9325588a5d166c80f525.png)

### 2、异常处理<a id="1.2">💚</a>

#### 2.1、处理方式

在编写代码处理异常时，2种不同的处理方式：

1. 使用try...catch...finally语句块处理它。
   - 自已解决异常
   - 
2. 在函数签名中使用throws 声明交给函数调用者caller去解决。
   - 交由调用者解决此异常
   - 如果一个异常回到**main()**方法，并且**main()**也不处理，则程序运行终止

#### 2.2、try.catch.finally

<!--代码格式-->

```java
try{ 
}catch(异常类型 对象){ 
// 异常的处理操作
}catch(异常类型 对象){ 
// 异常的处理操作
} ...
finally{ 
// 异常的统一出口
}
```

##### 1、try

- 捕获异常的第一步是用try{…}语句块选定捕获异常的范围，将可能出现异常的代码放在try语句块中。
- 如果发生异常，则尝试去匹配catch块，**catch块可以有多个**（因为try块可以出现多个不同类型异常）;
- 如果执行完try**不管有没有发生异常，则接着去执行finally块和finally后面的代码**（如果有的话）。

##### 2、catch

- 在catch语句块中是对异常对象进行处理的代码。每个try语句块可以伴随一个或多个catch语句，用于处理可能产生的不同类型的异常对象。
- 每一个catch块用于捕获并处理一个特定的异常，或者这异常类型的子类。**Java可以将多个异常声明在一个catch**中。 catch(Exception1 | Exception2 | Exception3 e)
- catch后面的括号定义了异常类型和异常参数。如果异常与之匹配且是最先匹配到的，则虚拟机将使用这个catch块来处理异常。
- 在catch块中可以使用这个块的异常参数来获取异常的相关信息。**异常参数是这个catch块中的局部变量**，其**它块不能访问**。与其它对象一样，可以访问一个异常对象的成员变量或调用它的方法。
  1. `getMessage()` 获取异常信息，返回字符串。
  2. `printStackTrace()` 获取异常类名和异常信息，以及异常出现在程序中的位置。返回值void。
- 如果当前try块中发生的异常在后续的所有catch中都没捕获到，则先去执行finally，然后到这个函数的外部caller中去匹配异常处理器。
- 如果try中没有发生异常，则所有的catch块将被忽略。
- 注意：如果明确知道产生的是何种异常，可以用该异常类作为catch的参数；也可以用其父类作为catch的参数。比如：可以用 ArithmeticException 类作为参数的地方，就可以用RuntimeException类作为参数，或者用所有异常的父类Exception类作为参数。但不能是与ArithmeticException类无关的异常，如NullPointerException（catch中的语句将不会执行）。

##### 3、finally

- finally块通常是可选的。捕获异常的最后一步是通过finally语句为异常处理提供一个统一的出口，使得在控制流转到程序的其它部分以前，能够对程序的状态作统一的管理。
- 不论在try代码块中是否发生了异常事件，catch语句是否执行，catch语句是否有异常，catch语句中是否有return，**finally块中的语句都会被执行**。
- 一个try至少要有一个catch块，否则， 至少要有1个finally块。但是**finally不是用来处理异常的，finally不会捕获异常。**
- finally主要做一些清理工作，如流的关闭，数据库连接的关闭等。

#### 2.3、throw | throws

##### 1、throws

`throws`主要在方法的声明上使用，表示方法中不处理异常，而交给调用处处理，如果一个异常回到**main()**方法，并且**main()**也不处理，则程序运行终止。实际上对于Java程序来讲，如果没有加入任何的异常处理，默认由JVM进行异常的处理操作。

##### 2、throw

`throw`表示在程序中手动抛出一个异常，因为从异常处理机制来看，所有的异常一旦产生之后，实际上抛出的就是一个异常类的实例化对象，那么此对象也可以由throw直接抛出。throw 语句必须写在函数中，执行throw 语句的地方就是一个异常抛出点，它和由JRE自动形成的异常抛出点没有任何差别。

#### 2.4、注意

- try块中的局部变量和catch块中的局部变量（包括异常变量），以及finally中的**局部变量，他们之间不可共享使用。**


- 每一个catch块用于处理一个异常。异常匹配是按照**catch块的顺序从上往下寻找**的，只有第一个匹配的catch会得到执行。匹配时，不仅运行精确匹配，也支持父类匹配，因此，如果同一个try块下的多个catch异常类型有父子关系，应该将子类异常放在前面，父类异常放在后面，这样保证每个catch块都有存在的意义。


- java中，异常处理的任务就是将执行控制流从异常发生的地方转移到能够处理这种异常的地方去。也就是说：当一个函数的某条语句发生异常时，**这条语句的后面的语句不会再执行，它失去了焦点。**执行流跳转到最近的匹配的异常处理catch代码块去执行，异常被处理完后，执行流会接着在“处理了这个异常的catch代码块”后面接着执行。

  <img src="https://pic.imgdb.cn/item/63cfee65588a5d166ceabac1.png" style="zoom:50%;" />

### 3、自定义异常<a id="1.3">💚</a>



### 4、try-with-resource<a id="1.4">💚</a>

[<!--返回目录-->](#1)

## 二、文件IO

<a id="2"><!--目录--></a>

- $\textcolor{#2a6e3f}{【1】}$ [](#2.1)
- $\textcolor{#2a6e3f}{【2】}$ [](#2.2)
- $\textcolor{#2a6e3f}{【3】}$ [](#2.3)
- $\textcolor{#2a6e3f}{【4】}$ [](#2.4)
- $\textcolor{#2a6e3f}{【5】}$ [](#2.5)
- $\textcolor{#2a6e3f}{【6】}$ [](#2.6)

### 1、<a id="2.1">💛</a>

### 2、<a id="2.2">💛</a>

### 3、<a id="2.3">💛</a>

### 4、<a id="2.4">💛</a>

### 5、<a id="2.5">💛</a>

### 6、<a id="2.6">💛</a>

---

[<!--返回目录-->](#2)

[<!--返回总目录-->](#0)

**[README]()**